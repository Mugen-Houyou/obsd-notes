---
id: Untitled
created_date: 2024-02-21
updated_date: 2024-02-21
type: post
link: 
tags:
  - CI_CD
  - CI_CD/Jenkins
  - "#on-premise"
---
![[Pasted image 20240221163140.png]]
# 2024.2.21. AWS EC2ì— Jenkins ì„¤ì¹˜ ë° GitHub ì—°ë™
- **ğŸ·ï¸Tags** :   #02-2024 #CI_CD #CI_CD/Jenkins #on-premise 

# 1ì°¨ ê³¼ì œ: ë¡œì»¬ Ubuntu VMì— ì„¤ì¹˜ ë° ì—°ë™
### Spring í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ìƒì„± ë° GitHub ë ˆí¬ì§€í† ë¦¬ ìƒì„±
- ì•„ë˜ì™€ ê°™ì´ GET http://localhost:57253/citest/getdata ìš”ì²­ì„ ë°›ëŠ” ê°„ë‹¨í•œ Spring í”„ë¡œì íŠ¸ë¥¼ ìƒì„±, GItHubì— ë°°í¬í•˜ì˜€ìŒ
![[Pasted image 20240221154944.png]]
- GitHub ë ˆí¬ì§€í† ë¦¬ URL: https://github.com/Mugen-Houyou/fisa_testrep_240920

### Dockerì— Jenkins ì„¤ì¹˜
- Ubuntu VMì— Docker ì„¤ì¹˜ ë¬¸ì„œ:
- Dockerì— Jenkins ì„¤ì¹˜:
	`docker run --name myjenkins --privileged -p 8087:8080 jenkins/jenkins:lts-jdk17`

![[Pasted image 20240221155326.png]]
- ì„¤ì¹˜ ì™„ë£Œ í™”ë©´

### Jenkinsì— ìƒˆë¡œìš´ Pipeline ë° GitHub ë ˆí¬ì§€í† ë¦¬ ì—°ë™
- ì•„ë˜ì™€ ê°™ì´ **New Item** í´ë¦­:
![[Pasted image 20240221155655.png|250]]
- ì•„ë˜ì™€ ê°™ì´ **item name** ì§€ì • í›„ **Pipeline**ìœ¼ë¡œ ìƒˆ ì•„ì´í…œ ìƒì„±:
![[Pasted image 20240221155937.png]]
- ì•„ë˜ì™€ ê°™ì´ **GitHub project** ì²´í¬, **ë ˆí¬ì§€í† ë¦¬ URL** ì§€ì •:
![[Pasted image 20240221160250.png]]
- ì•„ë˜ì™€ ê°™ì´ **GitHub hook trigger for GITScm polling** ì²´í¬:
![[Pasted image 20240221160359.png]]
- ì•„ë˜ì™€ ê°™ì´ pipeline ì½”ë“œë¥¼ êµ¬ì„±:
```
pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                git branch:'main',
                credentialsId: 'f4dfc070-f8f4-4045-81aa-f65a60b28355', 
                url: 'https://github.com/Mugen-Houyou/fisa_testrep_240920.git'
            }

            post {
                success {
                    echo "success!"
                }
            }
        }
        
        stage('list view') {
            steps {
                echo 'now showing contents'
                sh '''whoami'''
                sh '''pwd'''
                sh '''ls -al'''
                echo 'finished showing contents'
            }
        }
        stage('stage for gradle build') {
            steps {
                echo 'now building with gradlew'
                sh ''' ./gradlew build '''
                echo 'finished building with gradlew'
            }
        }
    }
}
```
- ì•„ë˜ì™€ ê°™ì´ Build Nowë¥¼ ëˆŒëŸ¬ ë¹Œë“œ ì‹œì‘:
	![[Pasted image 20240221162754.png|250]]
- ì•„ë˜ì™€ ê°™ì´ Stage Viewì—ì„œ ë¹Œë“œ ê²°ê³¼ í™•ì¸:
	![[Pasted image 20240221162942.png|500]]

### Jenkinsì— GitHub Webhook êµ¬ì„± ë° ë™ê¸°í™”
- í˜„ì¬ í˜¸ìŠ¤íŠ¸ëŠ” í”„ë¼ì´ë¹— IP ì£¼ì†Œë¥¼ ë°›ê³  ìˆìœ¼ë¯€ë¡œ, ê³µì¸ IP ì£¼ì†Œë¥¼ ë°›ê¸° ìœ„í•˜ì—¬ ngrok ì„¤ì¹˜ê°€ í•„ìš”í•¨
- ngrok í™ˆí˜ì´ì§€ ì£¼ì†Œ: https://ngrok.com/
- Sign in í›„ì— ì•„ë˜ì™€ ê°™ì€ ì„¤ì¹˜ ë°©ë²•ì´ ë‚˜ì˜´, ì›í•˜ëŠ” í”Œë«í¼ì— ë§ì¶”ì–´ ì„¤ì¹˜:
![[Pasted image 20240221161836.png|600]]
- `ngrok http http://localhost:8087` ì‹¤í–‰í•˜ì—¬ ê³µì¸ IP ì£¼ì†Œ í™•ì¸
- ì•„ë˜ì˜ ê²½ìš°ëŠ” https://cb6c-118-131-63-236.ngrok-free.app/ 
![[Pasted image 20240221161401.png]]
- ë ˆí¬ì§€í† ë¦¬ì—ì„œ Settings í´ë¦­, Webhooks í´ë¦­
- ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±, ë‹¨, URL ëì— `/github-webhook/`ë¥¼ ë¶™ì¸ ê²ƒì— ìœ ì˜:
![[Pasted image 20240221162146.png|600]]
- í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ README.md íŒŒì¼ì„ ì¼ë¶€ ìˆ˜ì •, ì»¤ë°‹, í‘¸ì‹œ:
![[Pasted image 20240221162336.png|600]]
- í‘¸ì‹œ í›„, Jenkinsì˜ Stage Viewì—ì„œ ìë™ìœ¼ë¡œ ë¹Œë“œê°€ ëœ ê²ƒì„ í™•ì¸:
	![[Pasted image 20240221162616.png|500]]


- 